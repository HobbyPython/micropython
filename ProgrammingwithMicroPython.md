OReilly

Programming with MicroPython

EMBEDDED PROGRAMMING WITH MICROCONTROLLERS & PYTHON

Nicholas H. Tollervey

​    我很激动能够参与到MicroPython的建设中，MicroPython是微控制器和嵌入式系统的Python3语言实现。这篇实用指南交付了知识，你需要撸起袖子用这种精简高效的编程语言创造精美的嵌入式项目。如果你作为一名程序员，教育者，或者开发人员，并且做好了学习的准备，那么你将享受这段旅程。

​    作者Nicholas Tollervey将带领你从入门学习到高级项目的实现。你将会探索运行MicroPython的各种类型的设备，调查这种语言的应用，和硬件交互的过程，联系外边的世界，无线通讯，制作声音和音乐，还有驱动机器人项目。

​    “没有人能够很深地投入，也不流露很多的热情，Nicholas Tollervey就像在micro:bit上的MicroPython。这本书结合了资深开发者的专业知识和经验丰富教师的智慧，用孩童般的兴奋和纯粹的探索乐趣完成。” -- Naomi Ceder-Python软件基金会主席

> MicroPython在以下四种设备上运行：PyBoard，the micro:bit，Adafruits Circuit Playground Express，ESP8266/ESP32。
>
> 探索框架帮助你生成，评估，发展解决实际问题的嵌入式项目。
>
> 投入实用性的MicroPython项目：视觉反馈，输入设备与传感器，通用输入输出，网络，声音和音乐，机器人学。
>
> 学习符合语言习惯的MicroPython使用最少的资源实现很多功能。
>
> 下一步参与到Python社区。

Nicholas Tollervey是一名受过训练的古典音乐家，哲学系毕业，教师，作家，软件开发者。他通过BBC的micro:bit提议，调整，贡献给MicroPython。

# 前言

​    2012年底，我有一个想法去构建一个微型的低功耗的计算器，可以直接在底层硬件的裸金属上运行脚本。目标是让任何人都能够非常简单的使用-无论他的背景或者是技术水平怎么样，都可以用很短的时间去控制真实的世界。在我制造机器人的时候我就想要一种更简单的方式去编程。

​    首先对于这个设备我没有任何特定的脚本语言，但我调查后发现人们更愿意用Python去编写，并且这门语言很容易学习，所以我选择了它。

   我也想在Kickstarter上运行一个项目，看看人们是否喜欢这个创意并且可以围绕这个项目建立一个社区。第一个名为MicroPython的Kickstarter项目在2013年末启动：他募集了能够运行MicroPython的pyboard数量3000块的资金；它带来了2000名人员在社区的初级阶段；它吸引了一些有才华的程序员，志愿贡献自己的时间和专业知识去构建和提升MicroPython。

​    我的背景是理论物理学，所以我对于MicroPython的设计和发展更多的是站在学术和研究的角度来看，简单的构建解决问题的一个方案。我相信这是MicroPython成功的原因之一。从一开始MicroPython能够工作的设想就不明朗，Python可以缩减到如此小的体积并且使用很少的内容运行在微控制器上。我对待MicroPython的床在就像是一个研究项目，并且我分析了很多编程技巧的结合，忽略了很多软件开发的法则，目的就是让它工作。

​    我对于MicroPython的一般理念是保持小但是有效。名字的表达含义是：micro使人想到微控制器和嵌入式系统，同时有极简主义的感觉。Python是一门很有用的语言并且设计的让人如此喜欢。极端的想法是使任何事物都极简（终级极简主义是无！），但是在另一个极端，增加大量的易用特性会导致过载和过多的资源使用。这些关于极简主义与实用主义的平衡观点不仅仅适用于MicroPython的设计和开发理念，Python也适用于更广泛的计算行业甚至更宽广的行业。

   自从第一个MicroPython项目成长起来，我和社区中的其他很多人在软件和硬件投入了巨大的工作。今天MicroPython保持初中让数字控制世界变得更简单，被更多的爱好者和专业人员发现，在教育，研究，商业领域。MicroPython实际上已经形成了自己的工业体系（很快就会扩张！），我很谦卑的去看某人的创造发展壮大和吸引全世界这么多不同的人的兴趣，还有这么多的应用。

​    MicroPython在不断地进步，社区的使用者每天都在增加，未来看起来确实很明亮。我希望MicroPython继续鼓舞人们，帮助人们学习，继续呗构建和控制系统，从咖啡机到航天卫星。MicroPython提供了对数字编程设备高效和有趣的方案。

​    Nicholas是MicroPython早期的建设者，对于这门语言的发展他付出了很多心血，最显著的是在社区和教育方面，最显著的发展就是micro:bit平台的成功，尤其是站在终端用户的角度而言，他很有资格教授你关于这么语言的知识。

​    所以投入到里边，开始进入迷人的MicroPython世界，接着走出去创造一些不可思议的设备！

-Damien P. George，Creator of MicroPython，July 2017

# 引语

​    这是一本关于MicroPython的书。

​    MicroPython是Python3语言对于微控制器和嵌入式系统的重实现。在如此受限的情况下重实现Python3语言是一大壮举。为什么如此重要？MicroPython授权的对象人群：他带来了最美丽，最易学，有表现力的编程语言在嵌入式开发领域。

​    这本书为MicroPython的学习者所写，我期望你已经知道了Python（舒适使用Python语法，会定义和引用一个函数，理解代码是如何控制程序。），但是我不希望你成为一个专家。举个例子，帧数里的很多材料在教育领域里也很有用；所以相比较成为一名专业的编程人员，你更有可能成为一名教师或者自学者。

​    我的目的是给予你需要的定义，重点，还有创意，当你面对项目的时候你会非常自信。

​    更重要的是，我希望这本书又有趣又能激励你，读完之后，我希望你有足够的热情能够投入，迈出第一步，去创造你自己的MicroPython - 小玩意，某物，魔法对象。

​    这本书会提供一个综上所述的运行MicroPython的设备，迅速的让你思考开发和执行嵌入式项目的最好方式，检测MicroPython的使用，与硬件的相互作用，去完成各种共同的结果和行为，探索符合语言习惯的MicroPython的开发项目。这和接下来几步的建议密切相关。

​    和其他书一样，这本书包含了很多妥协。一些人会觉得技术性太强，一些人会觉得技术性不够。非此即彼，一些人会觉得我花费了这么多时间在某几个科目上，而掩盖了其他的科目。

​    